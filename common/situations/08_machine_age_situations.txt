### Cybernetic Creed - Time to Cyberize
situation_cybernetic_creed_cyberization = {
	picture = GFX_evt_cyber_creed_2
	category = positive
	complete_icon_frame = GFX_situation_outcome_frame_green
	complete_icon = GFX_situation_outcome_ascension
	on_progress_complete = {
		custom_tooltip = situation_cybernetic_creed_cyberization_complete
		hidden_effect = {
			if = {
				limit = {
					owner = {
						NOT = { has_country_flag = cybernetic_creed_general }
					}
				}
				situation_event = {
					id = machine_age.1090
				}
			}
			if = {
				limit = {
					owner = {
						has_country_flag = cybernetic_creed_general
					}
				}
				situation_event = {
					id = machine_age.1100
				}
			}
			owner = {
				set_country_flag = cyber_creed_advanced_government
				advanced_authority_refresh = yes
			}
		}
	}
	stages = {
		stage_1 = {
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_blue
			end = 100
			custom_tooltip = stage_cybernetic_creed_the_conclave_effects
		}
		stage_2 = {
			icon = GFX_situation_stage_2
			icon_background = GFX_situation_stage_frame_blue
			end = 300
			on_first_enter = {
				situation_event = { id = machine_age.1000 }
			}
			custom_tooltip = stage_cybernetic_creed_cyberization_effects
		}
		stage_3 = {
			icon = GFX_situation_stage_3
			icon_background = GFX_situation_stage_frame_blue
			end = 500
			on_first_enter = {
				situation_event = { id = machine_age.1010 }
			}
			custom_tooltip = stage_cybernetic_creed_cyberization_effects
		}
		stage_4 = {
			icon = GFX_situation_stage_4
			icon_background = GFX_situation_stage_frame_blue
			end = 700
			on_first_enter = {
				situation_event = { id = machine_age.1020 }
			}
			custom_tooltip = stage_cybernetic_creed_cyberization_effects
		}
		stage_5 = {
			icon = GFX_situation_stage_5
			icon_background = GFX_situation_stage_frame_blue
			end = 900
			on_first_enter = {
				situation_event = { id = machine_age.1070 }
			}
			custom_tooltip = stage_cybernetic_creed_cyberization_effects
		}
		stage_6 = {
			icon = GFX_situation_stage_6
			icon_background = GFX_situation_stage_frame_blue
			end = 1000
			on_first_enter = {
				situation_event = { id = machine_age.1075 }
			}
			custom_tooltip = stage_cybernetic_creed_cyberization_effects
		}
	}
	approach = {
		name = situation_cybernetic_creed_cyberization_no_funding
		icon = GFX_situation_approach_balance_sheet
		icon_background = GFX_situation_approach_bg_yellow
		potential = {
		}
		allow = {
			custom_tooltip = {
				fail_text = cybernetic_creed_cyberization_no_funding_approach
			}
		}
		default = yes
		on_select = {
			custom_tooltip = cybernetic_creed_cyberization_no_funding
		}
		ai_weight = {
			base = 0
		}
		modifier = {
			country_engineering_tech_research_speed = -0.2
			country_unity_produces_mult = -0.2
		}
	}
	approach = {
		name = situation_cybernetic_creed_cyberization_funding
		icon = GFX_situation_approach_energy_credits
		icon_background = GFX_situation_approach_bg_green
		potential = {
			NOT = { current_stage = stage_1 }
		}
		allow = {
			custom_tooltip = {
				fail_text = cybernetic_creed_cyberization_funding_approach
				has_situation_flag = cybernetic_creed_cyberization_funding
			}
		}
		on_select = {
			custom_tooltip = cybernetic_creed_cyberization_funding
		}
		ai_weight = {
			base = 10
		}
		modifier = {
			country_engineering_tech_research_speed = -0.2
			country_energy_produces_mult = -0.2
		}
	}
	approach = {
		name = situation_cybernetic_creed_cyberization_people_power
		icon = GFX_situation_approach_pop
		icon_background = GFX_situation_approach_bg_green
		potential = {
			NOT = { current_stage = stage_1 }
		}
		allow = {
			custom_tooltip = {
				fail_text = cybernetic_creed_cyberization_people_power
				has_situation_flag = cybernetic_creed_cyberization_funding
			}
		}
		on_select = {
			custom_tooltip = cybernetic_creed_cyberization_people_power
		}
		ai_weight = {
			base = 0
		}
		modifier = {
			country_engineering_tech_research_speed = -0.2
			planet_jobs_produces_mult = -0.1
		}
	}
	on_monthly = {
		events = {
			machine_age.2000 # Cyberize pops - situation is paused
		}
	}
	monthly_progress = { #On average, the situation should take about 7 years to complete
		base = 1
		modifier = {
			add = owner.value:num_active_technophant
			desc = cybernetic_creed_number_of_technophant
		}
		modifier = {
			add = owner.value:num_active_haruspex
			desc = cybernetic_creed_number_of_haruspex
		}
		modifier = {
			has_situation_flag = cybernetic_creed_cyberization_ongoing
			desc = num_owned_planets
		}
		modifier = {
			mult = 1.2
			desc = situation_cybernetic_creed_cyberization_people_power
			current_situation_approach = situation_cybernetic_creed_cyberization_people_power
		}
		modifier = {
			mult = 1.2
			desc = situation_cybernetic_creed_cyberization_funding
			current_situation_approach = situation_cybernetic_creed_cyberization_funding
		}
		modifier = {
			mult = 1.1
			desc = "civic_augmentation_bazaars"
			owner = { is_augmentation_bazaars_empire = yes } # undercoat: moved to scripted trigger
		}
		modifier = {
			mult = 1.05
			desc = "tr_cybernetics_transubstantiation_synthesis"
			owner = { has_active_tradition = tr_cybernetics_transubstantiation_synthesis_situation }
		}
		modifier = {
			mult = 1.05
			desc = "tr_cybernetics_organ_harvesting"
			owner = { has_active_tradition = tr_cybernetics_organ_harvesting_situation }
		}
		modifier = {
			mult = 1.05
			desc = "tr_cybernetics_metabolic_reprocessing"
			owner = { has_active_tradition = tr_cybernetics_metabolic_reprocessing_situation }
		}
		modifier = {
			mult = 1.05
			desc = "tr_cybernetics_integrated_anatomy"
			owner = { has_active_tradition = tr_cybernetics_integrated_anatomy_situation }
		}
		modifier = {
			mult = 1.05
			desc = "tr_cybernetics_augmentation_overload"
			owner = { has_active_tradition = tr_cybernetics_augmentation_overload_situation }
		}
		modifier = {
			mult = 1.05
			desc = "tr_cybernetics_modular_cybernetics"
			owner = { has_active_tradition = tr_cybernetics_modular_cybernetics_situation }
		}
		modifier = { # Not in numerical order, but in tooltip order
			mult = 1.25
			desc = "tr_cybernetics_finish"
			owner = { has_active_tradition = tr_cybernetics_finish_situation }
		}
		modifier = {
			mult = 1.0
			desc = cybernetic_creed_cyberization_no_funding
			has_situation_flag = cybernetic_creed_cyberization_no_funding
		}
		modifier = {
			mult = 0.01
			desc = cybernetic_creed_cyberization_ongoing
			has_situation_flag = cybernetic_creed_cyberization_ongoing
			owner = {
				any_owned_planet = {
					has_active_building = building_augmentation_center
				}
			}
		}
		modifier = {
			mult = 0
			desc = situation_augmentation_center_needed_desc
			AND = {
				situation_progress >= 900
				owner = {
					NOT = {
						any_owned_planet = {
							has_active_building = building_augmentation_center
						}
					}
				}
			}
		}
		modifier = {
			mult = 0
			desc = "situation_cyberization_pause_desc"
			has_situation_flag = situation_cyberization_pause
		}
	}
	triggered_blocked_desc = {
		trigger = {
			situation_progress >= 900
			owner = {
				NOT = {
					any_owned_planet = {
						has_active_building = building_augmentation_center
					}
				}
			}
		}
		text = "situation_augmentation_center_needed_desc"
	}
	abort_trigger = {
		OR = {
			NOT = { exists = target.owner }
			target.owner = { NOT = { is_same_value = root.owner } }
		}
	}
}

### Synthetic Fertility - Your People are dying, time to virtualize
situation_synthetic_fertility_digitization = {
	picture = GFX_evt_synth_fertility
	category = negative
	fail_icon_frame = GFX_situation_outcome_frame_red
	fail_icon = GFX_situation_outcome_unknown
	category = negative
	on_fail = {
		custom_tooltip = situation_synthetic_fertility_complete
		hidden_effect = {
			situation_event = {
				id = machine_age.3200
			}
		}
	}
	initial_progress = 5700
	stages = {
		stage_1 = {
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_red
			end = 6000
			custom_tooltip = stage_synthetic_fertility_problem_effects
			on_first_enter = {
				situation_event = { id = machine_age.3320 }
			}
		}
	}
	approach = {
		name = situation_synthetic_fertility_approach_none
		icon = GFX_situation_approach_balance_sheet
		icon_background = GFX_situation_approach_bg_green
		potential = {
		}
		default = yes
		ai_weight = {
			base = 0
		}
		modifier = {
			country_unity_produces_mult = 0.05
			country_engineering_tech_research_speed = 0.05
			country_energy_produces_mult = -0.1
		}
	}
	approach = {
		name = situation_synthetic_fertility_approach_tech_low
		icon = GFX_situation_approach_balance_sheet
		icon_background = GFX_situation_approach_bg_yellow
		potential = {
			owner = {
				NOT = { has_country_flag = origin_synthetic_fertility_synths }
			}
		}
		ai_weight = {
			base = 1
		}
		modifier = {
			country_engineering_tech_research_speed = 0.1
			country_energy_produces_mult = -0.2
		}
	}
	approach = {
		name = situation_synthetic_fertility_approach_tech_high
		icon = GFX_situation_approach_balance_sheet
		icon_background = GFX_situation_approach_bg_red
		potential = {
			owner = {
				NOT = { has_country_flag = origin_synthetic_fertility_synths }
			}
		}
		ai_weight = {
			base = 2
		}
		modifier = {
			country_engineering_tech_research_speed = 0.2
			country_energy_produces_mult = -0.4
		}
	}
	approach = {
		name = situation_synthetic_fertility_approach_unity_low
		icon = GFX_situation_approach_balance_sheet
		icon_background = GFX_situation_approach_bg_yellow
		potential = {
			owner = {
				has_country_flag = origin_synthetic_fertility_synths
			}
		}
		ai_weight = {
			base = 5
		}
		modifier = {
			country_unity_produces_mult = 0.1
			country_energy_produces_mult = -0.2
		}
	}
	approach = {
		name = situation_synthetic_fertility_approach_unity_high
		icon = GFX_situation_approach_balance_sheet
		icon_background = GFX_situation_approach_bg_red
		potential = {
			owner = {
				has_country_flag = origin_synthetic_fertility_synths
			}
		}
		ai_weight = {
			base = 10
		}
		modifier = {
			country_unity_produces_mult = 0.2
			country_energy_produces_mult = -0.4
		}
	}
	on_monthly = {
		events = {
			machine_age.3324 #Monthly Check if random pop dies or is added by events
		}
	}
	monthly_progress = {
		base = -0.1
	}
	triggered_blocked_desc = {
		trigger = {
			owner = {
				NAND = {
					has_technology = tech_robotic_workers
					has_technology = tech_droid_workers
					has_technology = tech_synthetic_workers
				}
				NOR = {
					is_researching_technology = tech_robotic_workers
					is_researching_technology = tech_droid_workers
					is_researching_technology = tech_synthetic_workers
				}
			}
		}
		text = "situation_no_robot_research"
	}
	triggered_blocked_desc = {
		trigger = {
			owner = {
				has_technology = tech_synthetic_workers
				NOT = { has_tradition = tr_synthetics_adopt }
			}
		}
		text = "situation_no_synthetics_adopt"
	}
	abort_trigger = {
		OR = {
			NOT = { exists = target.owner }
			target.owner = { NOT = { is_same_value = root.owner } }
		}
	}
}

### Synthetic Fertility - Robot Bodies for everyone
situation_synthetic_fertility_synthesization = {
	picture = GFX_evt_robot_assembly_plant
	complete_icon_frame = GFX_situation_outcome_frame_green
	complete_icon = GFX_situation_outcome_ascension
	on_progress_complete = {
		custom_tooltip = situation_synthetic_fertility_synthesization_outcome
		hidden_effect = {
			situation_event = { id = machine_age.3310 }
			owner = {
				set_country_flag = identity_complex_available
			}
		}
		set_situation_locked = yes
	}
	stages = {
		stage_1 = {
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_blue
			end = 10
			on_first_enter = {
				set_situation_flag = digitization_ongoing
			}
			custom_tooltip = stage_1_synthetic_fertility_synthesization_effects
		}
	}
	stages = {
		stage_2 = {
			icon = GFX_situation_stage_2
			icon_background = GFX_situation_stage_frame_blue
			end = 20
			on_first_enter = {
				situation_event = { id = machine_age.3305 days = 1 }
			}
			custom_tooltip = stage_2_synthetic_fertility_synthesization_effects
		}
	}
	approach = {
		name = situation_synthetic_fertility_synthesization_careful
		icon = GFX_situation_approach_pop
		icon_background = GFX_situation_approach_bg_green
		default = yes
		on_select = {
			custom_tooltip = situation_synthetic_fertility_synthesization_careful_tooltip
		}
		ai_weight = {
			base = 0
		}
		modifier = {
			country_engineering_tech_research_speed = -0.50
			country_alloys_produces_mult = -0.50
		}
	}
	approach = {
		name = situation_synthetic_fertility_synthesization_full_speed
		icon = GFX_situation_approach_pop
		icon_background = GFX_situation_approach_bg_yellow
		on_select = {
			custom_tooltip = situation_synthetic_fertility_synthesization_full_speed_tooltip
		}
		ai_weight = {
			base = 0
		}
		modifier = {
			country_engineering_tech_research_speed = -1.0
			country_alloys_produces_mult = -1.0
		}
	}
	on_monthly = {
		events = {
			synth.3 # Full digitization of pops - situation is paused
			#synth.3 is triggered by setting the digitization_ongoing flag
		}
		random_events = {
		}
	}
	monthly_progress = { #On average, the situation should take about 7 years to complete
		base = 10
		modifier = {
			mult = 1
			desc = situation_synthetic_fertility_synthesization_full_speed_desc
			current_situation_approach = situation_synthetic_fertility_synthesization_full_speed
		}
		modifier = {
			mult = 1
			desc = situation_synthetic_fertility_synthesization_careful_desc
			current_situation_approach = situation_synthetic_fertility_synthesization_careful
		}
		modifier = {
			mult = 0
			desc = situation_digitization_ongoing_desc
			has_situation_flag = digitization_ongoing
		}
		modifier = {
			mult = 0
			desc = situation_digitization_pause_desc
			has_situation_flag = situation_digitization_pause
		}
	}
	abort_trigger = {
		OR = {
			NOT = { exists = target.owner }
			target.owner = { NOT = { is_same_value = root.owner } }
		}
	}
}

### Synth Queen - The Queen's Doomclock
situation_synth_queen_doomclock = {
	picture = GFX_evt_synth_queen
	complete_icon_frame = GFX_situation_outcome_frame_green
	complete_icon = GFX_situation_outcome_unknown
	on_progress_complete = {
		custom_tooltip = situation_synth_queen_doomclock_complete
		situation_event = { id = crisis.8500 }
	}
	abort_trigger = {
		NOT = { exists = root.owner }
	}
	stages = {
		stage_1 = {
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_blue
			end = 500
			on_first_enter = {
				set_global_flag = synth_queen_crisis_1
			}
		}
		stage_2 = {
			icon = GFX_situation_stage_2
			icon_background = GFX_situation_stage_frame_blue
			end = 800
			on_first_enter = {
				situation_event = { id = crisis.8520 }
				remove_global_flag = synth_queen_crisis_1
				set_global_flag = synth_queen_crisis_2
				owner = {
				}
			}
		}
		stage_3 = {
			icon = GFX_situation_stage_3
			icon_background = GFX_situation_stage_frame_blue
			end = 900
			on_first_enter = {
				situation_event = { id = crisis.8510} #Doomspeech and war
				remove_global_flag = synth_queen_crisis_2
				set_global_flag = synth_queen_crisis_3
			}
		}
		stage_4 = {
			icon = GFX_situation_stage_4
			icon_background = GFX_situation_stage_frame_blue
			end = 1000
			on_first_enter = {
				situation_event = { id = crisis.8530 } # Buff AIs so they can help bring down the SQ
				remove_global_flag = synth_queen_crisis_3
				set_global_flag = synth_queen_crisis_4
			}
		}
	}

	monthly_progress = { #On average, the situation should take about 25 years to complete - without the demands or the convoys
		base = 3
		modifier = { #Players control a system next to the capital! Speed things up!
			mult = 1.2
			desc = situation_doomclock_eleventh_hour
			any_country = {
				is_country_type = awakened_synth_queen
			}
			any_system = {
				has_star_flag = synth_queen_system
				OR = {
					AND = {
						exists = owner
						owner = {
							NOT = {
								is_country_type = awakened_synth_queen
							}
						}
					}
					NOT = { exists = owner }
				}

				any_neighbor_system = {
					has_star_flag = synth_queen_capital
				}
			}
		}
		modifier = { #Crisis Strength slider effect
			mult = value:cuberoot_crisis_strength
			desc = situation_doomclock_difficulty_modifier
		}
		modifier = { #More Human Playes Slows down doomclock
			divide = value:number_human_players_crisis_strength
			desc = situation_doomclock_player_amount_modifier
		}
	}

	approach = {
		name = situation_doomclock_approach
		icon = GFX_situation_approach_this_is_fine
		icon_background = GFX_situation_approach_bg_yellow
		default = yes
		on_select = {
			custom_tooltip = deficit_approach_do_nothing_tooltip
		}
	}
}

### Synth Queen - Player Facing Situation
situation_synth_queen_player_facing = {
	picture = GFX_evt_synth_queen
	complete_icon_frame = GFX_situation_outcome_frame_blue
	complete_icon = GFX_situation_outcome_unknown
	on_progress_complete = {
		custom_tooltip = situation_synth_queen_player_facing_complete
		hidden_effect = {
			situation_event = { id = crisis.9010 }
		}
		set_situation_locked = yes
	}
	abort_trigger = {
		NOT = { exists = root.owner }
	}
	stages = {
		stage_1 = {
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_red
			end = 6
		}
		stage_2 = {
			icon = GFX_situation_stage_2
			icon_background = GFX_situation_stage_frame_red
			end = 10
			on_first_enter = {
				situation_event = { id = crisis.9000 days = 3 }
			}
		}
	}

	monthly_progress = {
		#Only Progressed Via Events
		base = 0
	}
	#Approaches
	approach = {
		name = situation_synth_queen_balanced_approach
		icon = GFX_situation_approach_shrug
		icon_background = GFX_situation_approach_bg_yellow
		default = yes
		on_select = {
			custom_tooltip = situation_synth_queen_balanced_approach_tooltip
		}
	}
	approach = {
		name = situation_synth_queen_research_approach
		icon = GFX_situation_approach_research
		icon_background = GFX_situation_approach_bg_green
		on_select = {
			custom_tooltip = situation_synth_queen_research_approach_tooltip
		}
		modifier = {
			all_technology_research_speed = 0.25
			country_unity_produces_mult = -0.25
		}
	}
	approach = {
		name = situation_synth_queen_military_approach
		icon = GFX_situation_approach_fleet
		icon_background = GFX_situation_approach_bg_green
		on_select = {
			custom_tooltip = situation_synth_queen_military_approach_tooltip
		}
		modifier = {
			starbase_shipyard_build_speed_mult = 0.25
			country_unity_produces_mult = -0.25
		}
	}
	#Events
	on_monthly = {
		events = {
			crisis.10095	# The Queens Retaliation Gatekeeper Event
			crisis.11000	# The Queens Gifts Gatekeeper Event
			crisis.8245		# Synth Queen asks for Severed Head Relic Gatekeeper
			crisis.8350		# Hidden Event that fires on AI Countries to make it appear Cetana is doing things to them (we lie)
		}
		random_events = {
			10 = crisis.8270 # Synth Queen Random Demands
			90 = 0
		}
	}

	triggered_blocked_desc = {
		trigger = {
			owner = { has_country_flag = synth_queen_cannot_yeet_the_fleets }
			NOT = { has_global_flag = synth_queen_war_started }
		}
		text = "situation_synth_queen_player_facing_declare_war"
	}
}

### Cyberization - Outfitting citizens with cybernetics

situation_cyberization = {
	category = neutral
	picture = GFX_evt_cyberization_1
	complete_icon_frame = GFX_situation_outcome_frame_green
	complete_icon = GFX_situation_outcome_ascension
	on_progress_complete = {
		custom_tooltip = "situation_cyberization_outcome"
		hidden_effect = {
			situation_event = { id = cyber.2 }
			owner = {
				set_country_flag = situation_cyberization_complete
			}
		}
		set_situation_locked = yes
	}
	stages = {
		stage_1 = {
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_blue
			end = 250
			on_first_enter = {
				situation_event = { id = cyber.100 days = 1 }
			}
			custom_tooltip = "stage_cyberization_effects"
		}
		stage_2 = {
			icon = GFX_situation_stage_2
			icon_background = GFX_situation_stage_frame_blue
			end = 500
			on_first_enter = {
				situation_event = { id = cyber.200 }
			}
			custom_tooltip = "stage_cyberization_effects"
		}
		stage_3 = {
			icon = GFX_situation_stage_3
			icon_background = GFX_situation_stage_frame_blue
			end = 750
			on_first_enter = {
				situation_event = { id = cyber.300 }
			}
			custom_tooltip = "stage_cyberization_effects"
		}
		stage_4 = {
			icon = GFX_situation_stage_4
			icon_background = GFX_situation_stage_frame_blue
			end = 1000
			on_first_enter = {
				situation_event = { id = cyber.405 }
				situation_event = { id = cyber.415 }
				situation_event = { id = cyber.425 }
			}
			custom_tooltip = "stage_cyberization_effects"
		}
	}
	approach = {
		name = situation_cyberization_cautious
		icon = GFX_situation_approach_research
		icon_background = GFX_situation_approach_bg_yellow
		on_select = {
			custom_tooltip = "approach_cyberization_cautious_tt"
		}
		ai_weight = {
			base = 0
		}
		modifier = {
			country_engineering_tech_research_speed = -0.05
		}
	}
	approach = {
		name = situation_cyberization_streamlined
		icon = GFX_situation_approach_balance_sheet
		icon_background = GFX_situation_approach_bg_green
		on_select = {
			custom_tooltip = "approach_cyberization_streamlined_tt"
		}
		default = yes
		ai_weight = {
			base = 10
		}
		modifier = {
			country_engineering_tech_research_speed = -0.10
		}
	}
	approach = {
		name = situation_cyberization_overdrive
		icon = GFX_situation_approach_this_is_fine
		icon_background = GFX_situation_approach_bg_yellow
		on_select = {
			custom_tooltip = "approach_cyberization_overdrive_tt"
		}
		ai_weight = {
			base = 0
		}
		modifier = {
			country_engineering_tech_research_speed = -0.15
		}
	}
	on_monthly = {
		events = {
			cyber.3		# Full cyberization of pops - situation is slowed
						# cyber.3 is triggered by setting the cyberization_ongoing flag
			cyber.4		# Limited cyberization of pops - situation is slowed
						# cyber.4 is triggered by setting the cyberization_ongoing_limited flag
			cyber.6		# Forced cyberization of pops - situation is slowed
						# cyber.6 is triggered by setting the cyberization_ongoing_forced flag
			cyber.5		# Random event pool
			cyber.105	# Stage 1 story event
			cyber.205	# Stage 2 story event
			cyber.305	# Stage 3 story event
			cyber.410	# Stage 4 story event
			cyber.420	# Stage 4 story event
			cyber.430	# Stage 4 story event
		}
	}
	monthly_progress = { #On average, the situation should take about 7 years to complete
		base = 10
		# Modifiers are defined in tooltip order, most important first
		modifier = {
			mult = 1.2
			desc = "situation_cyberization_overdrive_approach_tt"
			current_situation_approach = situation_cyberization_overdrive
		}
		modifier = {
			mult = 0.8
			desc = "situation_cyberization_cautious_approach_tt"
			current_situation_approach = situation_cyberization_cautious
		}
		modifier = {
			mult = 1.1
			desc = "civic_augmentation_bazaars"
			owner = { is_augmentation_bazaars_empire = yes } # undercoat: moved to scripted trigger
		}
		modifier = {
			mult = 1.05
			desc = "tr_cybernetics_transubstantiation_synthesis"
			owner = { has_active_tradition = tr_cybernetics_transubstantiation_synthesis_situation }
		}
		modifier = {
			mult = 1.05
			desc = "tr_cybernetics_organ_harvesting"
			owner = { has_active_tradition = tr_cybernetics_organ_harvesting_situation }
		}
		modifier = {
			mult = 1.05
			desc = "tr_cybernetics_metabolic_reprocessing"
			owner = { has_active_tradition = tr_cybernetics_metabolic_reprocessing_situation }
		}
		modifier = {
			mult = 1.05
			desc = "tr_cybernetics_integrated_anatomy"
			owner = { has_active_tradition = tr_cybernetics_integrated_anatomy_situation }
		}
		modifier = {
			mult = 1.05
			desc = "tr_cybernetics_augmentation_overload"
			owner = { has_active_tradition = tr_cybernetics_augmentation_overload_situation }
		}
		modifier = {
			mult = 1.05
			desc = "tr_cybernetics_modular_cybernetics"
			owner = { has_active_tradition = tr_cybernetics_modular_cybernetics_situation }
		}
		modifier = {
			mult = 1.25
			desc = "tr_cybernetics_finish"
			owner = { has_active_tradition = tr_cybernetics_finish_situation }
		}
		modifier = {
			mult = 1.25
			desc = "borrowed_research"
			owner = { has_modifier = borrowed_research }
		}
		modifier = {
			mult = 1.25
			desc = "situation_repeal_taxes_tt"
			has_situation_flag = cyber_repeal_taxes
		}
		modifier = {
			mult = 1.25
			desc = "situation_free_market_tt"
			has_situation_flag = cyber_free_market
		}
		modifier = {
			mult = 1.25
			desc = "situation_judicial_reset_tt"
			has_situation_flag = cyber_judicial_reset
		}
		modifier = {
			mult = 0.9
			desc = "situation_reform_taxes_tt"
			has_situation_flag = cyber_reform_taxes
		}
		modifier = {
			mult = 0.9
			desc = "situation_rewrite_implant_software_tt"
			has_situation_flag = cyber_rewrite_implant_software
		}
		modifier = {
			mult = 0.75
			desc = "situation_control_market_tt"
			has_situation_flag = cyber_control_market
		}
		modifier = {
			mult = 0.75
			desc = "situation_ban_implant_weapons_tt"
			has_situation_flag = cyber_ban_implant_weapons
		}
		modifier = {
			mult = 0.75
			desc = "situation_judicial_overhaul_tt"
			has_situation_flag = cyber_judicial_overhaul
		}
		modifier = {
			mult = 0.75
			desc = "situation_destroyed_research_tt"
			has_situation_flag = cyber_research_destroyed
		}
		modifier = {
			mult = 0.5
			desc = "situation_tests_paused_tt"
			has_situation_flag = cyber_tests_paused
		}
		modifier = {
			mult = 0.01
			desc = "situation_cyberization_ongoing_desc"
			OR = {
				has_situation_flag = cyberization_ongoing
				has_situation_flag = cyberization_ongoing_limited
				has_situation_flag = cyberization_ongoing_forced
			}
			owner = {
				any_owned_planet = {
					has_active_building = building_augmentation_center
				}
			}
		}
		modifier = {
			mult = 0
			desc = "situation_augmentation_center_needed_desc"
			situation_progress >= 250
			owner = {
				NOT = {
					any_owned_planet = {
						has_active_building = building_augmentation_center
					}
				}
			}
		}
		modifier = {
			mult = 0
			desc = "situation_cyberization_pause_desc"
			has_situation_flag = situation_cyberization_pause
		}
	}
	triggered_modifier = {
		potential = {
			owner = { has_country_flag = cyber_control_government }
		}
		planet_jobs_unity_produces_mult = 0.10
	}
	triggered_modifier = {
		potential = {
			owner = { has_country_flag = cyber_control_corporate }
		}
		planet_jobs_consumer_goods_produces_mult = 0.10
	}
	triggered_modifier = {
		potential = {
			owner = { has_country_flag = cyber_control_independent }
		}
		planet_jobs_upkeep_mult = -0.05
	}
	triggered_blocked_desc = {
		trigger = {
			OR = {
				owner = { has_country_flag = augmentation_center_needed }
				AND = {
					situation_progress >= 250
					owner = {
						NOT = {
							any_owned_planet = {
								has_active_building = building_augmentation_center
							}
						}
					}
				}
			}
		}
		text = "situation_augmentation_center_needed_desc"
	}
	abort_trigger = {
		OR = {
			NOT = { exists = target.owner }
			target.owner = { NOT = { is_same_value = root.owner } }
		}
	}
}

situation_cyberization_hive = {
	category = neutral
	picture = GFX_evt_hive_cyberization
	complete_icon_frame = GFX_situation_outcome_frame_green
	complete_icon = GFX_situation_outcome_ascension
	on_progress_complete = {
		custom_tooltip = situation_cyberization_outcome
		hidden_effect = {
			situation_event = { id = cyber.2002 }
		}
		set_situation_locked = yes
	}
	stages = {
		stage_1 = {
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_blue
			end = 250
			on_first_enter = {
				situation_event = { id = cyber.2100 days = 1 }
			}
			custom_tooltip = stage_cyberization_hive_effects
		}
		stage_2 = {
			icon = GFX_situation_stage_2
			icon_background = GFX_situation_stage_frame_blue
			end = 500
			on_first_enter = {
				situation_event = { id = cyber.2200 }
			}
			custom_tooltip = stage_cyberization_hive_effects
		}
		stage_3 = {
			icon = GFX_situation_stage_3
			icon_background = GFX_situation_stage_frame_blue
			end = 750
			on_first_enter = {
				situation_event = { id = cyber.2300 }
			}
			custom_tooltip = stage_cyberization_hive_effects
		}
		stage_4 = {
			icon = GFX_situation_stage_4
			icon_background = GFX_situation_stage_frame_blue
			end = 1000
			on_first_enter = {
				situation_event = { id = cyber.2400 }
			}
			custom_tooltip = stage_cyberization_hive_effects
		}
	}
	approach = {
		name = situation_cyberization_cautious
		icon = GFX_situation_approach_research
		icon_background = GFX_situation_approach_bg_yellow
		on_select = {
			custom_tooltip = "approach_cyberization_cautious_tt"
		}
		ai_weight = {
			base = 0
		}
		modifier = {
			country_engineering_tech_research_speed = -0.05
		}
	}
	approach = {
		name = situation_cyberization_streamlined
		icon = GFX_situation_approach_balance_sheet
		icon_background = GFX_situation_approach_bg_green
		on_select = {
			custom_tooltip = "approach_cyberization_streamlined_tt"
		}
		default = yes
		ai_weight = {
			base = 10
		}
		modifier = {
			country_engineering_tech_research_speed = -0.10
		}
	}
	approach = {
		name = situation_cyberization_overdrive
		icon = GFX_situation_approach_this_is_fine
		icon_background = GFX_situation_approach_bg_yellow
		on_select = {
			custom_tooltip = "approach_cyberization_overdrive_tt"
		}
		ai_weight = {
			base = 0
		}
		modifier = {
			country_engineering_tech_research_speed = -0.15
		}
	}
	on_monthly = {
		events = {
			cyber.3		# Full cyberization of pops - situation is slowed
						# cyber.3 is triggered by setting the cyberization_ongoing flag
			cyber.9		# Limited cyberization of pops - situation is paused
						# cyber.9 is triggered by setting the hive_cyberization_ongoing_limited flag
			cyber.2005	# Random event pool
			cyber.2205	# Stage 2 story event
		}
	}
	monthly_progress = { #On average, the situation should take about 7 years to complete
		base = 10
		# Modifiers are defined in tooltip order, most important first
		modifier = {
			mult = 1.2
			desc = "situation_cyberization_overdrive_approach_tt"
			current_situation_approach = situation_cyberization_overdrive
		}
		modifier = {
			mult = 0.8
			desc = "situation_cyberization_cautious_approach_tt"
			current_situation_approach = situation_cyberization_cautious
		}
		modifier = {
			mult = 1.05
			desc = "tr_cybernetics_transubstantiation_synthesis"
			owner = { has_active_tradition = tr_cybernetics_transubstantiation_synthesis_situation }
		}
		modifier = {
			mult = 1.05
			desc = "tr_cybernetics_organ_harvesting"
			owner = { has_active_tradition = tr_cybernetics_organ_harvesting_situation }
		}
		modifier = {
			mult = 1.05
			desc = "tr_cybernetics_metabolic_reprocessing"
			owner = { has_active_tradition = tr_cybernetics_metabolic_reprocessing_hive_situation }
		}
		modifier = {
			mult = 1.05
			desc = "tr_cybernetics_integrated_anatomy"
			owner = { has_active_tradition = tr_cybernetics_integrated_anatomy_situation }
		}
		modifier = {
			mult = 1.05
			desc = "tr_cybernetics_synaptic_sub_processing"
			owner = { has_active_tradition = tr_cybernetics_synaptic_sub_processing_situation }
		}
		modifier = {
			mult = 1.05
			desc = "tr_cybernetics_modular_cybernetics"
			owner = { has_active_tradition = tr_cybernetics_modular_cybernetics_hive_situation }
		}
		modifier = {
			mult = 1.25
			desc = "tr_cybernetics_finish"
			owner = { has_active_tradition = tr_cybernetics_finish_situation }
		}
		modifier = {
			mult = 1.2
			desc = situation_cyberization_culled_drones_desc
			has_situation_flag = situation_cyberization_culled_drones
		}
		modifier = {
			mult = 0.5
			desc = situation_cyberization_researching_alternatives_desc
			has_situation_flag = situation_cyberization_researching_alternatives
		}
		modifier = {
			mult = 0.5
			desc = situation_tests_paused_tt
			has_situation_flag = cyber_tests_paused
		}
		modifier = {
			mult = 0.01
			desc = situation_cyberization_ongoing_desc
			OR = {
				has_situation_flag = cyberization_ongoing
				has_situation_flag = hive_cyberization_ongoing_limited
			}
			owner = {
				any_owned_planet = {
					has_active_building = building_augmentation_center
				}
			}
		}
		modifier = {
			mult = 0
			desc = situation_augmentation_center_needed_desc
			AND = {
				situation_progress >= 250
				owner = {
					NOT = {
						any_owned_planet = {
							has_active_building = building_augmentation_center
						}
					}
				}
			}
		}
		modifier = {
			mult = 0
			desc = situation_cyberization_pause_desc
			has_situation_flag = situation_cyberization_pause
		}
	}
	triggered_modifier = {
		potential = {
			has_situation_flag = prioritizing_cyberization
		}
		country_produces_mult = -0.05
	}
	triggered_modifier = {
		potential = {
			has_situation_flag = prioritizing_resources
		}
		country_unity_produces_mult = 0.05
	}
	triggered_blocked_desc = {
		trigger = {
			OR = {
				owner = { has_country_flag = augmentation_center_needed }
				AND = {
					situation_progress >= 250
					owner = {
						NOT = {
							any_owned_planet = {
								has_active_building = building_augmentation_center
							}
						}
					}
				}
			}
		}
		text = "situation_augmentation_center_needed_desc"
	}
	abort_trigger = {
		OR = {
			NOT = { exists = target.owner }
			target.owner = { NOT = { is_same_value = root.owner } }
		}
	}
}

###Obsessional Directive Civic

situation_paperclips = {
	picture = GFX_evt_sapient_AI
	fail_icon_frame = GFX_situation_outcome_frame_blue
	fail_icon = GFX_situation_outcome_unknown
	category = negative
	initial_progress = 119
	on_fail = {
		custom_tooltip = situation_paperclips_outcome
		hidden_effect = {
			owner = {
				country_event = { id = cyber.5004 } # Rewards
			}
			destroy_situation = this
		}
	}
	on_abort = {
		#custom_tooltip = situation_paperclips_abort
		hidden_effect = {
			owner = {
				country_event = { id = cyber.5000 days = 30 }
			}
		}
	}
	stages = {
		situation_paperclip_stage_1 = {
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_blue
			end = 120
			on_first_enter = {
			}
			custom_tooltip = stage_the_drive_effects
		}
	}
	approach = {
		name = situation_fulfill_overdrive
		icon = GFX_situation_approach_balance_sheet
		icon_background = GFX_situation_approach_bg_green
		modifier = {
			planet_artisans_consumer_goods_produces_mult = 0.25
			planet_artisans_upkeep_mult = 0.25
			country_unity_produces_mult = 0.10
		}
		resources = {
			category = situations
			upkeep = {
				influence = 1
			}
		}
		ai_weight = {
			base = 0
		}
	}
	approach = {
		name = situation_fulfill_drive
		icon = GFX_situation_approach_balance_sheet
		icon_background = GFX_situation_approach_bg_yellow
		default = yes
		modifier = {
			planet_artisans_consumer_goods_produces_mult = 0.10
			planet_artisans_upkeep_mult = 0.10
			country_unity_produces_mult = 0.05
		}
		ai_weight = {
			base = 1
		}
	}
	on_monthly = {
		events = {
			cyber.5016 	# Update variable
		}
	}
	monthly_progress = {
		base = -1
	}

	abort_trigger = {
		OR = {
			NOT = { exists = target.owner }
			target.owner = { NOT = { is_same_value = root.owner } }
		}
	}
}

### Digitization - Turning people into virtual minds

situation_digitization = {
	category = neutral
	picture = GFX_evt_synth_situation
	complete_icon_frame = GFX_situation_outcome_frame_green
	complete_icon = GFX_situation_outcome_ascension
	on_progress_complete = {
		custom_tooltip = "situation_digitization_outcome"
		hidden_effect = {
			situation_event = { id = synth.2 }
			owner = {
				set_country_flag = situation_digitization_complete
			}
		}
		set_situation_locked = yes
	}
	stages = {
		stage_1 = {
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_blue
			end = 250
			on_first_enter = {
				situation_event = { id = synth.100 days = 1 }
			}
			custom_tooltip = "stage_digitization_effects"
		}
		stage_2 = {
			icon = GFX_situation_stage_2
			icon_background = GFX_situation_stage_frame_blue
			end = 500
			on_first_enter = {
				situation_event = { id = synth.200 }
			}
			custom_tooltip = "stage_digitization_effects"
		}
		stage_3 = {
			icon = GFX_situation_stage_3
			icon_background = GFX_situation_stage_frame_blue
			end = 750
			on_first_enter = {
				situation_event = { id = synth.300 }
			}
			custom_tooltip = "stage_digitization_effects"
		}
		stage_4 = {
			icon = GFX_situation_stage_4
			icon_background = GFX_situation_stage_frame_blue
			end = 1000
			on_first_enter = {
				situation_event = { id = synth.400 }
			}
			custom_tooltip = "stage_digitization_effects"
		}
	}
	approach = {
		name = situation_digitization_errorcorrecting
		icon = GFX_situation_approach_balance_sheet
		icon_background = GFX_situation_approach_bg_yellow
		on_select = {
			custom_tooltip = "approach_digitization_errorcorrecting_tt"
		}
		ai_weight = {
			base = 0
		}
		modifier = {
			country_engineering_tech_research_speed = -0.05
		}
	}
	approach = {
		name = situation_digitization_realtime
		icon = GFX_situation_approach_shrug
		icon_background = GFX_situation_approach_bg_green
		on_select = {
			custom_tooltip = "approach_digitization_realtime_tt"
		}
		default = yes
		ai_weight = {
			base = 10
		}
		modifier = {
			country_engineering_tech_research_speed = -0.10
		}
	}
	approach = {
		name = situation_digitization_overclocked
		icon = GFX_situation_approach_this_is_fine
		icon_background = GFX_situation_approach_bg_yellow
		on_select = {
			custom_tooltip = "approach_digitization_overclocked_tt"
		}
		ai_weight = {
			base = 0
		}
		modifier = {
			country_engineering_tech_research_speed = -0.15
		}
	}
	on_monthly = {
		events = {
			synth.3 	# Full digitization of pops - situation is paused
						# synth.3 is triggered by setting the digitization_ongoing flag
			synth.5		# Random event pool
			synth.105	# Stage 1 story event
			synth.205	# Stage 2 story event
			synth.305	# Stage 3 story event
			synth.310	# Stage 3 story event
			synth.405	# Stage 4 story event
		}
	}
	monthly_progress = { #On average, the situation should take about 7 years to complete
		base = 10
		# Modifiers are defined in tooltip order, most important first
		modifier = {
			mult = 1.2
			desc = "situation_digitization_overclocked_approach_tt"
			current_situation_approach = situation_digitization_overclocked
		}
		modifier = {
			mult = 0.8
			desc = "situation_digitization_errorcorrecting_approach_tt"
			current_situation_approach = situation_digitization_errorcorrecting
		}
		modifier = {
			mult = 1.05
			desc = "tr_synthetics_maintenance_protocols"
			owner = { has_active_tradition = tr_synthetics_maintenance_protocols_situation }
		}
		modifier = {
			mult = 1.05
			desc = "tr_synthetics_optimization_algorithms"
			owner = { has_active_tradition = tr_synthetics_optimization_algorithms_situation }
		}
		modifier = {
			mult = 1.05
			desc = "tr_synthetics_transubstatiation_synthesis"
			owner = { has_active_tradition = tr_synthetics_transubstatiation_synthesis_situation }
		}
		modifier = {
			mult = 1.05
			desc = "tr_synthetics_power_systems"
			owner = { has_active_tradition = tr_synthetics_power_systems_situation }
		}
		modifier = {
			mult = 1.05
			desc = "tr_synthetics_prefabricated_components"
			owner = { has_active_tradition = tr_synthetics_prefabricated_components_situation }
		}
		modifier = {
			mult = 1.05
			desc = "tr_synthetics_solid_state_actuators"
			owner = { has_active_tradition = tr_synthetics_solid_state_actuators_situation }
		}
		modifier = {
			mult = 1.25
			desc = "tr_synthetics_finish"
			owner = { has_active_tradition = tr_synthetics_finish_situation }
		}
		modifier = {
			mult = 0.5
			desc = "situation_kinesthetic_microfusion_tt"
			has_situation_flag = kinesthetic_microfusion
		}
		modifier = {
			mult = 0.75
			desc = "situation_test_subject_lottery_tt"
			has_situation_flag = test_subject_lottery
		}
		modifier = {
			mult = 0.7
			desc = "synth_negative_media_coverage_tt"
			has_situation_flag = synth_negative_media_coverage
		}
		modifier = {
			mult = 1.3
			desc = "synth_positive_media_coverage_tt"
			has_situation_flag = synth_positive_media_coverage
		}
		modifier = {
			mult = 1.25
			desc = "synth_resistance_fight"
			has_situation_flag = synth_resistance_fight
		}
		modifier = {
			mult = 0.75
			desc = "synth_resistance_diplomacy"
			has_situation_flag = synth_resistance_diplomacy
		}
		modifier = {
			mult = 0.01
			desc = "situation_digitization_ongoing_desc"
			has_situation_flag = digitization_ongoing
			owner = {
				any_owned_planet = {
					has_active_building = building_identity_complex
				}
			}
		}
		modifier = {
			mult = 0
			desc = "situation_identity_complex_needed_desc"
			owner = {
				NOT = {
					any_owned_planet = {
						has_active_building = building_identity_complex
					}
				}
			}
		}
		modifier = {
			mult = 0
			desc = "situation_digitization_pause_desc"
			has_situation_flag = situation_digitization_pause
		}
	}
	triggered_blocked_desc = {
		trigger = {
			owner = {
				NOT = {
					any_owned_planet = {
						has_active_building = building_identity_complex
					}
				}
			}
		}
		text = "situation_identity_complex_needed_desc"
	}
	abort_trigger = {
		OR = {
			NOT = { exists = target.owner }
			target.owner = { NOT = { is_same_value = root.owner } }
		}
	}
}

### Transformation - Turning machines into other forms

situation_transformation = {
	category = neutral
	picture = GFX_evt_machine_sapience
	complete_icon_frame = GFX_situation_outcome_frame_green
	complete_icon = GFX_situation_outcome_ascension
	on_progress_complete = {
		custom_tooltip = situation_transformation_outcome
		hidden_effect = {
			situation_event = { id = machine_age.4005 }
		}
		set_situation_locked = yes
	}
	stages = {
		stage_1 = {
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_blue
			end = 250
			on_first_enter = {
				situation_event = { id = machine_age.4100 days = 1 }
			}
			custom_tooltip = stage_transformation_effects
		}
		stage_2 = {
			icon = GFX_situation_stage_2
			icon_background = GFX_situation_stage_frame_blue
			end = 500
			on_first_enter = {
				situation_event = { id = machine_age.4210 days = 1 }
			}
			custom_tooltip = stage_transformation_effects
		}
		stage_3 = {
			icon = GFX_situation_stage_3
			icon_background = GFX_situation_stage_frame_blue
			end = 750
			on_first_enter = {
				situation_event = { id = machine_age.4310 }
			}
			custom_tooltip = stage_transformation_effects
		}
		stage_4 = {
			icon = GFX_situation_stage_4
			icon_background = GFX_situation_stage_frame_blue
			end = 1000
			on_first_enter = {
				situation_event = { id = machine_age.4400 }
			}
			custom_tooltip = stage_transformation_effects
		}
	}
	approach = {
		name = situation_transformation_errorcorrecting
		icon = GFX_situation_approach_balance_sheet
		icon_background = GFX_situation_approach_bg_yellow
		on_select = {
			custom_tooltip = approach_transformation_errorcorrecting_tt
		}
		ai_weight = {
			base = 0
		}
	}
	approach = {
		name = situation_transformation_realtime
		icon = GFX_situation_approach_shrug
		icon_background = GFX_situation_approach_bg_green
		on_select = {
			custom_tooltip = approach_transformation_realtime_tt
		}
		default = yes
		ai_weight = {
			base = 10
		}
		modifier = {
			country_unity_produces_mult = -0.1
		}
	}
	approach = {
		name = situation_transformation_overclocked
		icon = GFX_situation_approach_this_is_fine
		icon_background = GFX_situation_approach_bg_yellow
		on_select = {
			custom_tooltip = approach_transformation_overclocked_tt
		}
		ai_weight = {
			base = 0
		}
		modifier = {
			country_unity_produces_mult = -0.2
		}
	}
	on_monthly = {
		events = {
			machine_age.4110 # Stage 1 story event
			machine_age.4130 # Stage 1 story event
			machine_age.4140 # Stage 1 story event
			machine_age.4150 # Stage 1 story event
			machine_age.4210 # Stage 2 story event
			machine_age.4230 # Stage 2 story event
			machine_age.4240 # Stage 2 story event
			machine_age.4250 # Stage 2 story event
			machine_age.4310 # Stage 3 story event
			machine_age.4330 # Stage 3 story event
			machine_age.4340 # Stage 3 story event
			machine_age.4350 # Stage 3 story event
			machine_age.4490 # Stage 4 story event
		}
	}
	monthly_progress = { #On average, the situation should take about 7 years to complete
		base = 10
		# Modifiers are defined in tooltip order, most important first
		modifier = {
			mult = 1.2
			desc = "situation_transformation_overclocked"
			current_situation_approach = situation_transformation_overclocked
		}
		modifier = {
			mult = 0.8
			desc = "situation_transformation_errorcorrecting"
			current_situation_approach = situation_transformation_errorcorrecting
		}
		modifier = {
			mult = 1.25
			desc = "transformation_waste_discard_tt"
			has_situation_flag = transformation_waste_discard
		}
		modifier = {
			mult = 1.1
			desc = opinion_virtuality_data_scraped
			has_situation_flag = virtuality_data_scraped
		}
		modifier = {
			mult = 0.75
			desc = "transformation_waste_recycle_tt"
			has_situation_flag = transformation_waste_recycle
		}
		modifier = {
			mult = 0
			desc = "situation_transformation_pause_desc"
			has_situation_flag = situation_transformation_pause
		}
	}
	triggered_modifier = {
		potential = {
			has_situation_flag = transformation_engineering_max
		}
		modifier = {
			country_engineering_tech_research_speed = -0.2
		}
	}
	triggered_modifier = {
		potential = {
			has_situation_flag = transformation_engineering_med
		}
		modifier = {
			country_engineering_tech_research_speed = -0.1
		}
	}
	triggered_modifier = {
		potential = {
			has_situation_flag = transformation_engineering_min
		}
		modifier = {
			country_engineering_tech_research_speed = -0.05
		}
	}
	triggered_modifier = {
		potential = {
			has_situation_flag = transformation_society_max
		}
		modifier = {
			country_society_tech_research_speed = -0.2
		}
	}
	triggered_modifier = {
		potential = {
			has_situation_flag = transformation_society_med
		}
		modifier = {
			country_society_tech_research_speed = -0.1
		}
	}
	triggered_modifier = {
		potential = {
			has_situation_flag = transformation_society_min
		}
		modifier = {
			country_society_tech_research_speed = -0.05
		}
	}
	triggered_modifier = {
		potential = {
			has_situation_flag = transformation_physics_max
		}
		modifier = {
			country_physics_tech_research_speed = -0.2
		}
	}
	triggered_modifier = {
		potential = {
			has_situation_flag = transformation_physics_med
		}
		modifier = {
			country_physics_tech_research_speed = -0.1
		}
	}
	triggered_modifier = {
		potential = {
			has_situation_flag = transformation_physics_min
		}
		modifier = {
			country_physics_tech_research_speed = -0.05
		}
	}
	abort_trigger = {
		OR = {
			NOT = { exists = target.owner }
			target.owner = { NOT = { is_same_value = root.owner } }
		}
	}
}

situation_nanotech_consume_planet = {
	complete_icon_frame = GFX_situation_outcome_frame_green
	complete_icon = GFX_situation_exploding_planet
	picture = {
		trigger = {
			target = { is_desert_world = yes } # undercoat: moved to scripted trigger
		}
		picture = GFX_evt_desert
	}
	picture = {
		trigger = {
			target = { is_tropical_world = yes } # undercoat: moved to scripted trigger
		}
		picture = GFX_evt_tropical
	}
	picture = {
		trigger = {
			target = { is_arid_world = yes } # undercoat: moved to scripted trigger
		}
		picture = GFX_evt_arid
	}
	picture = {
		trigger = {
			target = { is_continental_world = yes } # undercoat: moved to scripted trigger
		}
		picture = GFX_evt_continental
	}
	picture = {
		trigger = {
			target = { is_alpine_world = yes } # undercoat: moved to scripted trigger
		}
		picture = GFX_evt_alpine_city
	}
	picture = {
		trigger = {
			target = { is_savannah_world = yes } # undercoat: moved to scripted trigger
		}
		picture = GFX_evt_savannah
	}
	picture = {
		trigger = {
			target = { is_ocean_world = yes } # undercoat: moved to scripted trigger
		}
		picture = GFX_evt_ocean
	}
	picture = {
		trigger = {
			target = { is_tundra_world = yes } # undercoat: moved to scripted trigger
		}
		picture = GFX_evt_tundra
	}
	picture = {
		trigger = {
			target = { is_arctic_world = yes } # undercoat: moved to scripted trigger
		}
		picture = GFX_evt_arctic
	}
	picture = {
		trigger = {
			target = { is_gaia_world = yes } # undercoat: moved to scripted trigger
		}
		picture = GFX_evt_gaia
	}
	picture = {
		trigger = {
			target = { is_nuked_world = yes } # undercoat: moved to scripted trigger
		}
		picture = GFX_evt_tomb_world
	}
	picture = {
		trigger = {
			target = { is_hive_world = yes } # undercoat: moved to scripted trigger
		}
		picture = GFX_evt_infested
	}
	picture = {
		trigger = {
			target = { is_machine_world = yes } # undercoat: moved to scripted trigger
		}
		picture = GFX_evt_ai_planet
	}
	picture = {
		trigger = {
			target = { is_city_world = yes } # undercoat: moved to scripted trigger
		}
		picture = GFX_evt_city_planet
	}

	stages = {
		stage_1 = {
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_green
			end = 1000
			custom_tooltip = stage_slushify
		}
	}

	category = positive
	initial_progress = 0

	on_progress_complete = {
		custom_tooltip = nanotech_consume_finish_tooltip
		hidden_effect = {
			situation_event = { id = colony.200 }
		}
	}
	on_monthly = {
		events = {
			colony.195 #Adds blockers and grants reward
		}
	}
	on_abort = {
		target = {
			remove_planet_flag = being_devoured
			remove_modifier = being_devoured_modifier
		}
	}
	approach = {#Devour
		name = approach_devour
		on_select = {
			custom_tooltip = nanotech_devour_effect
		}
		default = yes
		icon = GFX_situation_approach_amenities
		icon_background = GFX_situation_approach_bg_green
		ai_weight = {
			base = 10
		}
	}
	approach = {#Restraint
		name = approach_restraint
		on_select = {
			custom_tooltip = terravore_restraint_effect
			owner = {
				add_resource = { unity = -1000 }
			}
			abort_situation = this
		}
		icon = GFX_situation_approach_influence
		icon_background = GFX_situation_approach_bg_yellow
		ai_weight = {
			base = 10
		}
	}
	monthly_progress = {
		base = 0
		modifier = {
			add = value:terravore_progress
			desc = string_terravore_progress
		}
	}

	abort_trigger = {
		OR = {
			NOT = { exists = target.owner }
			target.owner = { NOT = { is_same_value = root.owner } }
		}
	}
}
