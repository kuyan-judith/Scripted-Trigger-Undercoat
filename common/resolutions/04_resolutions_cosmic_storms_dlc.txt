@resolution_weight_hated = 3
@resolution_weight_disliked = 4
@resolution_weight_unpopular = 5
@resolution_weight_normal = 6
@resolution_weight_popular = 6.5
@resolution_weight_loved = 7

@resolution_cost_t1 = 100
@resolution_cost_t2 = 150
@resolution_cost_t3 = 200
@resolution_cost_t4 = 250
@resolution_cost_t5 = 300
@resolution_cost_denounce = 25

@resolution_flag_timer = 360

#(AUG-43107) Add Leader traits for the new Galcom resolutions

# Cosmic Storms Stances - Space Weather Exploitation

resolution_cosmic_storms_shared_knowledge = {
	icon = "GFX_resolution_cosmic_storms_stances"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t1
		}
	}

	target = no
	level = 1

	modifier = {
		diplo_weight_pops_mult = 0.1
	}

	effect = {
		custom_tooltip = resolution_cosmic_storms_shared_knowledge_tooltip
		hidden_effect = {
			set_global_flag = galactic_community_resolution_passed
			set_timed_country_flag = { flag = galactic_community_resolution_passed_cosmic_storms_stances days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_cosmic_storms_stances days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	potential = {
		has_cosmic_storms_dlc = yes
		has_global_flag = cosmic_storm_has_occurred
	}

	allow = {
		custom_tooltip = {
			fail_text = "resolution_already_active"
			NOR = {
				is_active_resolution = "resolution_cosmic_storms_shared_knowledge"
				is_active_resolution = "resolution_cosmic_storms_protection_initiative"
				is_active_resolution = "resolution_cosmic_storms_galactic_management"
				is_active_resolution = "resolution_cosmic_storms_utilization_protocols"
				is_active_resolution = "resolution_cosmic_storms_manipulation_mandate"
			}
		}
	}

	ai_weight = {
		base = @resolution_weight_loved

		modifier = {
			factor = 2
			is_materialist = yes
			desc = ethic_materialist
		}

		modifier = {
			factor = 2
			is_egalitarian = yes
			desc = ethic_egalitarian
		}

		modifier = {
			factor = 2
			is_storm_callers_empire = yes
			desc = civic_storm_callers
		}

		modifier = {
			factor = 2
			is_environmental_architects_empire = yes
			desc = civic_environmental_architects
		}

		modifier = {
			factor = 2
			is_astrometeorologist_empire = yes
			desc = civic_astrometeorology
		}

		modifier = {
			factor = 0.5
			is_spiritualist = yes
			desc =  ethic_spiritualist
		}

		modifier = {
			factor = 0.5
			is_authoritarian = yes
			desc = ethic_authoritarian
		}
	}
}

resolution_cosmic_storms_shared_knowledge_repeal = {
	icon = "GFX_resolution_repeal_red"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t1
		}
	}
	target = no
	fire_and_forget = yes

	effect = {
		custom_tooltip = resolution_cosmic_storms_shared_knowledge_repeal_effect_success
		hidden_effect = {
			cancel_resolution = "resolution_cosmic_storms_shared_knowledge"
			set_timed_country_flag = { flag = galactic_community_resolution_passed_cosmic_storms_stances_repeal days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_cosmic_storms_stances_repeal days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	potential = {
		has_cosmic_storms_dlc = yes
		has_global_flag = cosmic_storm_has_occurred
		is_active_resolution = "resolution_cosmic_storms_shared_knowledge"
	}

	ai_weight = {
		base = @resolution_weight_unpopular

		modifier = {
			factor = 0.5
			is_materialist = yes
			desc = ethic_materialist
		}

		modifier = {
			factor = 0.5
			is_egalitarian = yes
			desc = ethic_egalitarian
		}

		modifier = {
			factor = 0.5
			is_storm_callers_empire = yes
			desc = civic_storm_callers
		}

		modifier = {
			factor = 0.5
			is_environmental_architects_empire = yes
			desc = civic_environmental_architects
		}

		modifier = {
			factor = 0.5
			is_astrometeorologist_empire = yes
			desc = civic_astrometeorology
		}

		modifier = {
			factor = 2
			is_spiritualist = yes
			desc =  ethic_spiritualist
		}

		modifier = {
			factor = 2
			is_authoritarian = yes
			desc = ethic_authoritarian
		}
	}
}

resolution_cosmic_storms_protection_initiative = {
	icon = "GFX_resolution_cosmic_storms_stances"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t2
		}
	}

	target = no
	level = 2

	modifier = {
		diplo_weight_pops_mult = 0.2
	}

	effect = {
		custom_tooltip = resolution_cosmic_storms_protection_initiative_tooltip
		hidden_effect = {
			set_global_flag = galactic_community_resolution_passed
			set_timed_country_flag = { flag = galactic_community_resolution_passed_cosmic_storms_stances days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_cosmic_storms_stances days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	potential = {
		has_cosmic_storms_dlc = yes
		has_global_flag = cosmic_storm_has_occurred
	}

	allow = {
		is_active_resolution = "resolution_cosmic_storms_shared_knowledge"
	}

	ai_weight = {
		base = @resolution_weight_popular

		modifier = {
			factor = 2
			is_materialist = yes
			desc = ethic_materialist
		}

		modifier = {
			factor = 2
			is_egalitarian = yes
			desc = ethic_egalitarian
		}

		modifier = {
			factor = 2
			is_pacifist = yes
			desc = ethic_pacifist
		}
		modifier = {
			factor = 2
			is_storm_callers_empire = yes
			desc = civic_storm_callers
		}

		modifier = {
			factor = 2
			is_astrometeorologist_empire = yes
			desc = civic_astrometeorology
		}

		modifier = {
			factor = 0.5
			is_spiritualist = yes
			desc =  ethic_spiritualist
		}

		modifier = {
			factor = 0.5
			is_authoritarian = yes
			desc = ethic_authoritarian
		}
	}
}

resolution_cosmic_storms_protection_initiative_repeal = {
	icon = "GFX_resolution_repeal_red"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t2
		}
	}
	target = no
	fire_and_forget = yes

	effect = {
		custom_tooltip = resolution_cosmic_storms_protection_initiative_repeal_effect_success
		hidden_effect = {
			cancel_resolution = "resolution_cosmic_storms_protection_initiative"
			set_timed_country_flag = { flag = galactic_community_resolution_passed_cosmic_storms_stances_repeal days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_cosmic_storms_stances_repeal days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	potential = {
		has_cosmic_storms_dlc = yes
		has_global_flag = cosmic_storm_has_occurred
		is_active_resolution = "resolution_cosmic_storms_protection_initiative"
	}

	ai_weight = {
		base = @resolution_weight_unpopular

		modifier = {
			factor = 0.5
			is_materialist = yes
			desc = ethic_materialist
		}

		modifier = {
			factor = 0.5
			is_egalitarian = yes
			desc = ethic_egalitarian
		}

		modifier = {
			factor = 0.5
			is_pacifist = yes
			desc = ethic_pacifist
		}

		modifier = {
			factor = 0.5
			is_storm_callers_empire = yes
			desc = civic_storm_callers
		}

		modifier = {
			factor = 0.5
			is_astrometeorologist_empire = yes
			desc = civic_astrometeorology
		}

		modifier = {
			factor = 2
			is_spiritualist = yes
			desc =  ethic_spiritualist
		}

		modifier = {
			factor = 2
			is_authoritarian = yes
			desc = ethic_authoritarian
		}
	}
}

resolution_cosmic_storms_galactic_management = {
	icon = "GFX_resolution_cosmic_storms_stances"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}

	target = no
	level = 3

	modifier = {
		diplo_weight_pops_mult = 0.3
	}

	effect = {
		custom_tooltip = resolution_cosmic_storms_galactic_management_tooltip
		hidden_effect = {
			set_global_flag = galactic_community_resolution_passed
			set_timed_country_flag = { flag = galactic_community_resolution_passed_cosmic_storms_stances days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_cosmic_storms_stances days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	potential = {
		has_cosmic_storms_dlc = yes
		has_global_flag = cosmic_storm_has_occurred
	}

	allow = {
		is_active_resolution = "resolution_cosmic_storms_protection_initiative"
	}

	ai_weight = {
		base = @resolution_weight_normal

		modifier = {
			factor = 2
			is_materialist = yes
			desc = ethic_materialist
		}

		modifier = {
			factor = 2
			is_egalitarian = yes
			desc = ethic_egalitarian
		}

		modifier = {
			factor = 2
			is_pacifist = yes
			desc = ethic_pacifist
		}

		modifier = {
			factor = 2
			is_storm_callers_empire = yes
			desc = civic_storm_callers
		}

		modifier = {
			factor = 2
			is_astrometeorologist_empire = yes
			desc = civic_astrometeorology
		}

		modifier = {
			factor = 0.5
			is_spiritualist = yes
			desc =  ethic_spiritualist
		}

		modifier = {
			factor = 0.5
			is_authoritarian = yes
			desc = ethic_authoritarian
		}
	}
}

resolution_cosmic_storms_galactic_management_repeal = {
	icon = "GFX_resolution_repeal_red"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no
	fire_and_forget = yes

	effect = {
		custom_tooltip = resolution_cosmic_storms_galactic_management_repeal_effect_success
		hidden_effect = {
			cancel_resolution = "resolution_cosmic_storms_galactic_management"
			set_timed_country_flag = { flag = galactic_community_resolution_passed_cosmic_storms_stances_repeal days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_cosmic_storms_stances_repeal days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	potential = {
		has_cosmic_storms_dlc = yes
		has_global_flag = cosmic_storm_has_occurred
		is_active_resolution = "resolution_cosmic_storms_galactic_management"
	}

	ai_weight = {
		base = @resolution_weight_unpopular

		modifier = {
			factor = 0.5
			is_materialist = yes
			desc = ethic_materialist
		}

		modifier = {
			factor = 0.5
			is_egalitarian = yes
			desc = ethic_egalitarian
		}

		modifier = {
			factor = 0.5
			is_pacifist = yes
			desc = ethic_pacifist
		}

		modifier = {
			factor = 0.5
			is_storm_callers_empire = yes
			desc = civic_storm_callers
		}

		modifier = {
			factor = 0.5
			is_astrometeorologist_empire = yes
			desc = civic_astrometeorology
		}

		modifier = {
			factor = 2
			is_spiritualist = yes
			desc =  ethic_spiritualist
		}

		modifier = {
			factor = 2
			is_authoritarian = yes
			desc = ethic_authoritarian
		}
	}
}

resolution_cosmic_storms_utilization_protocols = {
	icon = "GFX_resolution_cosmic_storms_stances"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t4
		}
	}

	target = no
	level = 4

	modifier = {
		diplo_weight_pops_mult = 0.4
	}

	effect = {
		custom_tooltip = resolution_cosmic_storms_utilization_protocols_tooltip
		hidden_effect = {
			set_global_flag = galactic_community_resolution_passed
			set_global_flag = resolution_with_breach_effect_passed
			set_timed_country_flag = { flag = galactic_community_resolution_passed_cosmic_storms_stances days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_cosmic_storms_stances days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	potential = {
		has_cosmic_storms_dlc = yes
		has_global_flag = cosmic_storm_has_occurred
	}

	allow = {
		is_active_resolution = "resolution_cosmic_storms_galactic_management"
	}

	breach = {
		NOT = {
			has_technology = tech_ship_hull_storm_breaker_1
		}
	}

	ai_weight = {
		base = @resolution_weight_unpopular

		modifier = {
			factor = 2
			is_materialist = yes
			desc = ethic_materialist
		}

		modifier = {
			factor = 2
			is_egalitarian = yes
			desc = ethic_egalitarian
		}

		modifier = {
			factor = 2
			is_pacifist = yes
			desc = ethic_pacifist
		}

		modifier = {
			factor = 2
			is_storm_callers_empire = yes
			desc = civic_storm_callers
		}

		modifier = {
			factor = 0.5
			is_spiritualist = yes
			desc =  ethic_spiritualist
		}

		modifier = {
			factor = 0.5
			is_authoritarian = yes
			desc = ethic_authoritarian
		}

		modifier = {
			factor = 0.5
			is_environmentalist_empire = yes # undercoat: moved to scripted trigger
			desc = civic_environmentalist
		}
	}
}

resolution_cosmic_storms_utilization_protocols_repeal = {
	icon = "GFX_resolution_repeal_red"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t4
		}
	}
	target = no
	fire_and_forget = yes

	effect = {
		custom_tooltip = resolution_cosmic_storms_utilization_protocols_repeal_effect_success
		hidden_effect = {
			cancel_resolution = "resolution_cosmic_storms_utilization_protocols"
			set_timed_country_flag = { flag = galactic_community_resolution_passed_cosmic_storms_stances_repeal days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_cosmic_storms_stances_repeal days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	potential = {
		has_cosmic_storms_dlc = yes
		has_global_flag = cosmic_storm_has_occurred
		is_active_resolution = "resolution_cosmic_storms_utilization_protocols"
	}

	ai_weight = {
		base = @resolution_weight_unpopular

		modifier = {
			factor = 0.5
			is_materialist = yes
			desc = ethic_materialist
		}

		modifier = {
			factor = 0.5
			is_egalitarian = yes
			desc = ethic_egalitarian
		}

		modifier = {
			factor = 0.5
			is_pacifist = yes
			desc = ethic_pacifist
		}

		modifier = {
			factor = 0.5
			is_storm_callers_empire = yes
			desc = civic_storm_callers
		}

		modifier = {
			factor = 2
			is_spiritualist = yes
			desc =  ethic_spiritualist
		}

		modifier = {
			factor = 2
			is_authoritarian = yes
			desc = ethic_authoritarian
		}

		modifier = {
			factor = 2
			is_environmentalist_empire = yes # undercoat: moved to scripted trigger
			desc = civic_environmentalist
		}
	}
}

resolution_cosmic_storms_manipulation_mandate = {
	icon = "GFX_resolution_cosmic_storms_stances"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t5
		}
	}

	target = no
	level = 5

	modifier = {
		diplo_weight_pops_mult = 0.5
	}

	effect = {
		custom_tooltip = resolution_cosmic_storms_manipulation_mandate_tooltip
		hidden_effect = {
			set_global_flag = galactic_community_resolution_passed
			set_global_flag = resolution_with_breach_effect_passed
			set_timed_country_flag = { flag = galactic_community_resolution_passed_cosmic_storms_stances days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_cosmic_storms_stances days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	potential = {
		has_cosmic_storms_dlc = yes
		has_global_flag = cosmic_storm_has_occurred
	}

	allow = {
		is_active_resolution = "resolution_cosmic_storms_utilization_protocols"
	}

	breach = {
		OR = {
			NOT = {
				has_technology = tech_ship_hull_storm_breaker_1
			}
			any_owned_planet = {
				NOT = {
					has_any_storm_building = yes
				}
			}
		}
	}

	ai_weight = {
		base = @resolution_weight_disliked

		modifier = {
			factor = 2
			is_materialist = yes
			desc = ethic_materialist
		}

		modifier = {
			factor = 2
			is_egalitarian = yes
			desc = ethic_egalitarian
		}

		modifier = {
			factor = 2
			is_pacifist = yes
			desc = ethic_pacifist
		}

		modifier = {
			factor = 2
			is_storm_callers_empire = yes
			desc = civic_storm_callers
		}

		modifier = {
			factor = 0.5
			is_spiritualist = yes
			desc =  ethic_spiritualist
		}

		modifier = {
			factor = 0.5
			is_authoritarian = yes
			desc = ethic_authoritarian
		}

		modifier = {
			factor = 0.5
			is_environmentalist_empire = yes # undercoat: moved to scripted trigger
			desc = civic_environmentalist
		}
	}
}

resolution_cosmic_storms_manipulation_mandate_repeal = {
	icon = "GFX_resolution_repeal_red"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t5
		}
	}
	target = no
	fire_and_forget = yes

	effect = {
		custom_tooltip = resolution_cosmic_storms_manipulation_mandate_repeal_effect_success
		hidden_effect = {
			cancel_resolution = "resolution_cosmic_storms_manipulation_mandate"
			set_timed_country_flag = { flag = galactic_community_resolution_passed_cosmic_storms_stances_repeal days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_cosmic_storms_stances_repeal days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	potential = {
		has_cosmic_storms_dlc = yes
		has_global_flag = cosmic_storm_has_occurred
		is_active_resolution = "resolution_cosmic_storms_manipulation_mandate"
	}

	ai_weight = {
		base = @resolution_weight_unpopular

		modifier = {
			factor = 0.5
			is_materialist = yes
			desc = ethic_materialist
		}

		modifier = {
			factor = 0.5
			is_egalitarian = yes
			desc = ethic_egalitarian
		}

		modifier = {
			factor = 0.5
			is_pacifist = yes
			desc = ethic_pacifist
		}

		modifier = {
			factor = 0.5
			is_storm_callers_empire = yes
			desc = civic_storm_callers
		}

		modifier = {
			factor = 2
			is_spiritualist = yes
			desc =  ethic_spiritualist
		}

		modifier = {
			factor = 2
			is_authoritarian = yes
			desc = ethic_authoritarian
		}

		modifier = {
			factor = 2
			is_environmentalist_empire = yes # undercoat: moved to scripted trigger
			desc = civic_environmentalist
		}
	}
}


# Cosmic Storms Stances - Storm Environmentalists

resolution_cosmic_storms_advanced_storm_studies = {
	icon = "GFX_resolution_cosmic_storms_stances"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t1
		}
	}

	target = no
	level = 1

	modifier = {
		diplo_weight_pops_mult = -0.1
		station_researchers_produces_mult = 0.1
	}

	effect = {
		custom_tooltip = resolution_cosmic_storms_advanced_storm_studies_tooltip
		hidden_effect = {
			set_global_flag = galactic_community_resolution_passed
			set_timed_country_flag = { flag = galactic_community_resolution_passed_cosmic_storms_stances days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_cosmic_storms_stances days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	potential = {
		has_cosmic_storms_dlc = yes
		has_global_flag = cosmic_storm_has_occurred
	}

	allow = {
		custom_tooltip = {
			fail_text = "resolution_already_active"
			NOR = {
				is_active_resolution = "resolution_cosmic_storms_advanced_storm_studies"
				is_active_resolution = "resolution_cosmic_storms_galactic_emergency_relief"
				is_active_resolution = "resolution_cosmic_storms_storm_encouragement_mandate"
				is_active_resolution = "resolution_cosmic_storms_control_restrictions"
				is_active_resolution = "resolution_cosmic_storms_preservation_initiative"
			}
		}
	}

	ai_weight = {
		base = @resolution_weight_loved

		modifier = {
			factor = 2
			is_environmentalist_empire = yes # undercoat: moved to scripted trigger
			desc = civic_environmentalist
		}

		modifier = {
			factor = 2
			is_environmental_architects_empire = yes
			desc = civic_environmental_architects
		}

		modifier = {
			factor = 0.5
			is_authoritarian = yes
			desc = ethic_authoritarian
		}

		modifier = {
			factor = 0.5
			is_storm_callers_empire = yes
			desc = civic_storm_callers
		}

		modifier = {
			factor = 0.5
			is_astrometeorologist_empire = yes
			desc = civic_astrometeorology
		}
	}
}

resolution_cosmic_storms_advanced_storm_studies_repeal = {
	icon = "GFX_resolution_repeal_red"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t1
		}
	}
	target = no
	fire_and_forget = yes

	effect = {
		custom_tooltip = resolution_cosmic_storms_advanced_storm_studies_repeal_effect_success
		hidden_effect = {
			cancel_resolution = "resolution_cosmic_storms_advanced_storm_studies"
			set_timed_country_flag = { flag = galactic_community_resolution_passed_cosmic_storms_stances_repeal days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_cosmic_storms_stances_repeal days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	potential = {
		has_cosmic_storms_dlc = yes
		has_global_flag = cosmic_storm_has_occurred
		is_active_resolution = "resolution_cosmic_storms_advanced_storm_studies"
	}

	ai_weight = {
		base = @resolution_weight_unpopular

		modifier = {
			factor = 0.5
			is_environmentalist_empire = yes # undercoat: moved to scripted trigger
			desc = civic_environmentalist
		}

		modifier = {
			factor = 0.5
			is_environmental_architects_empire = yes
			desc = civic_environmental_architects
		}

		modifier = {
			factor = 2
			is_authoritarian = yes
			desc = ethic_authoritarian
		}

		modifier = {
			factor = 2
			is_storm_callers_empire = yes
			desc = civic_storm_callers
		}

		modifier = {
			factor = 2
			is_astrometeorologist_empire = yes
			desc = civic_astrometeorology
		}
	}
}

resolution_cosmic_storms_galactic_emergency_relief = {
	icon = "GFX_resolution_cosmic_storms_stances"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t2
		}
	}

	target = no
	level = 2

	modifier = {
		diplo_weight_pops_mult = -0.2
		station_researchers_produces_mult = 0.2
		ships_upkeep_mult = 0.1
	}

	effect = {
		custom_tooltip = resolution_cosmic_storms_galactic_emergency_relief_tooltip
		hidden_effect = {
		set_emergency_fund_contribution_rate = 0.05
		set_emergency_fund_active = yes
		set_global_flag = galactic_community_resolution_passed
			set_timed_country_flag = { flag = galactic_community_resolution_passed_cosmic_storms_stances days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_cosmic_storms_stances days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	potential = {
		has_cosmic_storms_dlc = yes
		has_global_flag = cosmic_storm_has_occurred
	}

	allow = {
		is_active_resolution = "resolution_cosmic_storms_advanced_storm_studies"
	}

	breach = {
		has_country_flag = failed_fund_contribution
	}

	ai_weight = {
		base = @resolution_weight_popular

		modifier = {
			factor = 2
			is_environmentalist_empire = yes # undercoat: moved to scripted trigger
			desc = civic_environmentalist
		}

		modifier = {
			factor = 2
			is_egalitarian = yes
			desc = ethic_egalitarian
		}

		modifier = {
			factor = 2
			has_civic = civic_beacon_of_liberty
			desc = civic_beacon_of_liberty
		}

		modifier = {
			factor = 2
			is_environmental_architects_empire = yes
			desc = civic_environmental_architects
		}

		modifier = {
			factor = 0.5
			is_authoritarian = yes
			desc = ethic_authoritarian
		}

		modifier = {
			factor = 0.5
			is_militarist = yes
			desc = ethic_militarist
		}

		modifier = {
			factor = 0.5
			is_storm_callers_empire = yes
			desc = civic_storm_callers
		}

		modifier = {
			factor = 0.5
			is_astrometeorologist_empire = yes
			desc = civic_astrometeorology
		}
	}
}

resolution_cosmic_storms_galactic_emergency_relief_repeal = {
	icon = "GFX_resolution_repeal_red"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t2
		}
	}
	target = no
	fire_and_forget = yes

	effect = {
		custom_tooltip = resolution_cosmic_storms_galactic_emergency_relief_repeal_effect_success
		hidden_effect = {
			cancel_resolution = "resolution_cosmic_storms_galactic_emergency_relief"
			set_timed_country_flag = { flag = galactic_community_resolution_passed_cosmic_storms_stances_repeal days = @resolution_flag_timer }
			set_emergency_fund_active = no
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_cosmic_storms_stances_repeal days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	potential = {
		has_cosmic_storms_dlc = yes
		has_global_flag = cosmic_storm_has_occurred
		is_active_resolution = "resolution_cosmic_storms_galactic_emergency_relief"
	}

	ai_weight = {
		base = @resolution_weight_unpopular

		modifier = {
			factor = 0.5
			is_environmentalist_empire = yes # undercoat: moved to scripted trigger
			desc = civic_environmentalist
		}

		modifier = {
			factor = 0.5
			is_egalitarian = yes
			desc = ethic_egalitarian
		}

		modifier = {
			factor = 0.5
			has_civic = civic_beacon_of_liberty
			desc = civic_beacon_of_liberty
		}

		modifier = {
			factor = 0.5
			is_environmental_architects_empire = yes
			desc = civic_environmental_architects
		}

		modifier = {
			factor = 2
			is_authoritarian = yes
			desc = ethic_authoritarian
		}

		modifier = {
			factor = 2
			is_militarist = yes
			desc = ethic_militarist
		}

		modifier = {
			factor = 2
			is_storm_callers_empire = yes
			desc = civic_storm_callers
		}

		modifier = {
			factor = 2
			is_astrometeorologist_empire = yes
			desc = civic_astrometeorology
		}
	}
}

resolution_cosmic_storms_storm_encouragement_mandate = {
	icon = "GFX_resolution_cosmic_storms_stances"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}

	target = no
	level = 3

	modifier = {
		diplo_weight_pops_mult = -0.3
		station_researchers_produces_mult = 0.3
		ships_upkeep_mult = 0.15
	}

	effect = {
		custom_tooltip = resolution_cosmic_storms_storm_encouragement_mandate_tooltip
		hidden_effect = {
			set_emergency_fund_contribution_rate = 0.1
			set_global_flag = galactic_community_resolution_passed
			set_timed_country_flag = { flag = galactic_community_resolution_passed_cosmic_storms_stances days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_cosmic_storms_stances days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	potential = {
		has_cosmic_storms_dlc = yes
		has_global_flag = cosmic_storm_has_occurred
	}

	allow = {
		is_active_resolution = "resolution_cosmic_storms_galactic_emergency_relief"
	}

	breach = {
		OR = {
			has_any_storm_repellent_building = yes
			has_country_flag = failed_fund_contribution
		}
	}

	ai_weight = {
		base = @resolution_weight_normal

		modifier = {
			factor = 2
			is_environmentalist_empire = yes # undercoat: moved to scripted trigger
			desc = civic_environmentalist
		}

		modifier = {
			factor = 2
			is_egalitarian = yes
			desc = ethic_egalitarian
		}

		modifier = {
			factor = 2
			is_storm_callers_empire = yes
			desc = civic_storm_callers
		}

		modifier = {
			factor = 2
			is_environmental_architects_empire = yes
			desc = civic_environmental_architects
		}

		modifier = {
			factor = 2
			is_astrometeorologist_empire = yes
			desc = civic_astrometeorology
		}

		modifier = {
			factor = 0.5
			is_authoritarian = yes
			desc = ethic_authoritarian
		}

		modifier = {
			factor = 0.5
			is_militarist = yes
			desc = ethic_militarist
		}

		modifier = {
			factor = 0.5
			is_idyllic_bloom_empire = yes
			desc = civic_idyllic_bloom
		}
	}
}

resolution_cosmic_storms_storm_encouragement_mandate_repeal = {
	icon = "GFX_resolution_repeal_red"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no
	fire_and_forget = yes

	effect = {
		custom_tooltip = resolution_cosmic_storms_storm_encouragement_mandate_repeal_effect_success
		hidden_effect = {
			set_emergency_fund_contribution_rate = 0.05
			cancel_resolution = "resolution_cosmic_storms_storm_encouragement_mandate"
			set_timed_country_flag = { flag = galactic_community_resolution_passed_cosmic_storms_stances_repeal days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_cosmic_storms_stances_repeal days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	potential = {
		has_cosmic_storms_dlc = yes
		has_global_flag = cosmic_storm_has_occurred
		is_active_resolution = "resolution_cosmic_storms_storm_encouragement_mandate"
	}

	ai_weight = {
		base = @resolution_weight_unpopular

		modifier = {
			factor = 0.5
			is_environmentalist_empire = yes # undercoat: moved to scripted trigger
			desc = civic_environmentalist
		}

		modifier = {
			factor = 0.5
			is_egalitarian = yes
			desc = ethic_egalitarian
		}

		modifier = {
			factor = 0.5
			is_storm_callers_empire = yes
			desc = civic_storm_callers
		}

		modifier = {
			factor = 0.5
			is_environmental_architects_empire = yes
			desc = civic_environmental_architects
		}

		modifier = {
			factor = 0.5
			is_astrometeorologist_empire = yes
			desc = civic_astrometeorology
		}

		modifier = {
			factor = 2
			is_authoritarian = yes
			desc = ethic_authoritarian
		}

		modifier = {
			factor = 2
			is_militarist = yes
			desc = ethic_militarist
		}

		modifier = {
			factor = 2
			is_idyllic_bloom_empire = yes
			desc = civic_idyllic_bloom
		}
	}
}

resolution_cosmic_storms_control_restrictions = {
	icon = "GFX_resolution_cosmic_storms_stances"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t4
		}
	}

	target = no
	level = 4

	modifier = {
		diplo_weight_pops_mult = -0.4
		station_researchers_produces_mult = 0.4
		ships_upkeep_mult = 0.2
	}

	effect = {
		custom_tooltip = resolution_cosmic_storms_control_restrictions_tooltip
		hidden_effect = {
			set_global_flag = galactic_community_resolution_passed
			set_global_flag = resolution_with_breach_effect_passed
			set_timed_country_flag = { flag = galactic_community_resolution_passed_cosmic_storms_stances days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_cosmic_storms_stances days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	potential = {
		has_cosmic_storms_dlc = yes
		has_global_flag = cosmic_storm_has_occurred
	}

	allow = {
		is_active_resolution = "resolution_cosmic_storms_storm_encouragement_mandate"
	}

	breach = {
		OR = {
				has_any_storm_repellent_building = yes
				has_any_storm_attracting_building = yes
				has_country_flag = failed_fund_contribution
			}
	}

	ai_weight = {
		base = @resolution_weight_unpopular

		modifier = {
			factor = 2
			is_environmentalist_empire = yes # undercoat: moved to scripted trigger
			desc = civic_environmentalist
		}

		modifier = {
			factor = 2
			is_egalitarian = yes
			desc = ethic_egalitarian
		}

		modifier = {
			factor = 2
			is_environmental_architects_empire = yes
			desc = civic_environmental_architects
		}

		modifier = {
			factor = 0.5
			is_authoritarian = yes
			desc = ethic_authoritarian
		}

		modifier = {
			factor = 0.5
			is_militarist = yes
			desc = ethic_militarist
		}

		modifier = {
			factor = 0.5
			is_storm_callers_empire = yes
			desc = civic_storm_callers
		}

		modifier = {
			factor = 0.5
			is_astrometeorologist_empire = yes
			desc = civic_astrometeorology
		}
	}
}

resolution_cosmic_storms_control_restrictions_repeal = {
	icon = "GFX_resolution_repeal_red"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t4
		}
	}
	target = no
	fire_and_forget = yes

	effect = {
		custom_tooltip = resolution_cosmic_storms_control_restrictions_repeal_effect_success
		hidden_effect = {
			cancel_resolution = "resolution_cosmic_storms_control_restrictions"
			set_timed_country_flag = { flag = galactic_community_resolution_passed_cosmic_storms_stances_repeal days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_cosmic_storms_stances_repeal days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	potential = {
		has_cosmic_storms_dlc = yes
		has_global_flag = cosmic_storm_has_occurred
		is_active_resolution = "resolution_cosmic_storms_control_restrictions"
	}

	ai_weight = {
		base = @resolution_weight_unpopular

		modifier = {
			factor = 0.5
			is_environmentalist_empire = yes # undercoat: moved to scripted trigger
			desc = civic_environmentalist
		}

		modifier = {
			factor = 0.5
			is_egalitarian = yes
			desc = ethic_egalitarian
		}

		modifier = {
			factor = 0.5
			is_environmental_architects_empire = yes
			desc = civic_environmental_architects
		}

		modifier = {
			factor = 2
			is_authoritarian = yes
			desc = ethic_authoritarian
		}

		modifier = {
			factor = 2
			is_militarist = yes
			desc = ethic_militarist
		}

		modifier = {
			factor = 2
			is_storm_callers_empire = yes
			desc = civic_storm_callers
		}

		modifier = {
			factor = 2
			is_astrometeorologist_empire = yes
			desc = civic_astrometeorology
		}
	}
}

resolution_cosmic_storms_preservation_initiative = {
	icon = "GFX_resolution_cosmic_storms_stances"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t5
		}
	}

	target = no
	level = 5

	modifier = {
		diplo_weight_pops_mult = -0.5
		station_researchers_produces_mult = 0.5
		ships_upkeep_mult = 0.25
	}

	effect = {
		custom_tooltip = resolution_cosmic_storms_preservation_initiative_tooltip
		hidden_effect = {
			set_emergency_fund_contribution_rate = 0.15
			set_global_flag = galactic_community_resolution_passed
			set_global_flag = resolution_with_breach_effect_passed
			set_timed_country_flag = { flag = galactic_community_resolution_passed_cosmic_storms_stances days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_cosmic_storms_stances days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	potential = {
		has_cosmic_storms_dlc = yes
		has_global_flag = cosmic_storm_has_occurred
	}

	allow = {
		is_active_resolution = "resolution_cosmic_storms_control_restrictions"
	}

	breach = {
		OR = {
			has_any_storm_repellent_building = yes
			has_any_storm_attracting_building = yes
			has_edict = storm_attraction_field
			has_edict = storm_repel_field
			has_country_flag = failed_fund_contribution
		}
	}

	ai_weight = {
		base = @resolution_weight_disliked

		modifier = {
			factor = 2
			is_environmentalist_empire = yes # undercoat: moved to scripted trigger
			desc = civic_environmentalist
		}

		modifier = {
			factor = 2
			is_egalitarian = yes
			desc = ethic_egalitarian
		}

		modifier = {
			factor = 2
			is_environmental_architects_empire = yes
			desc = civic_environmental_architects
		}

		modifier = {
			factor = 0.5
			is_authoritarian = yes
			desc = ethic_authoritarian
		}

		modifier = {
			factor = 0.5
			is_militarist = yes
			desc = ethic_militarist
		}

		modifier = {
			factor = 0.5
			is_storm_callers_empire = yes
			desc = civic_storm_callers
		}

		modifier = {
			factor = 0.5
			is_astrometeorologist_empire = yes
			desc = civic_astrometeorology
		}
	}
}

resolution_cosmic_storms_preservation_initiative_repeal = {
	icon = "GFX_resolution_repeal_red"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t5
		}
	}
	target = no
	fire_and_forget = yes

	effect = {
		custom_tooltip = resolution_cosmic_storms_preservation_initiative_repeal_effect_success
		hidden_effect = {
			set_emergency_fund_contribution_rate = 0.1
			cancel_resolution = "resolution_cosmic_storms_preservation_initiative"
			set_timed_country_flag = { flag = galactic_community_resolution_passed_cosmic_storms_stances_repeal days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_cosmic_storms_stances_repeal days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	potential = {
		has_cosmic_storms_dlc = yes
		has_global_flag = cosmic_storm_has_occurred
		is_active_resolution = "resolution_cosmic_storms_preservation_initiative"
	}

	ai_weight = {
		base = @resolution_weight_unpopular

		modifier = {
			factor = 0.5
			is_environmentalist_empire = yes # undercoat: moved to scripted trigger
			desc = civic_environmentalist
		}

		modifier = {
			factor = 0.5
			is_egalitarian = yes
			desc = ethic_egalitarian
		}

		modifier = {
			factor = 0.5
			is_environmental_architects_empire = yes
			desc = civic_environmental_architects
		}

		modifier = {
			factor = 2
			is_authoritarian = yes
			desc = ethic_authoritarian
		}

		modifier = {
			factor = 2
			is_militarist = yes
			desc = ethic_militarist
		}

		modifier = {
			factor = 2
			is_storm_callers_empire = yes
			desc = civic_storm_callers
		}

		modifier = {
			factor = 2
			is_astrometeorologist_empire = yes
			desc = civic_astrometeorology
		}
	}
}
